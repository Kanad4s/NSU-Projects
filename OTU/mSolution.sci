function [x, status, residual] = system4x4(A, b)
    // ==============================================
    // Функция для решения СЛАУ с 4 переменными
    // Входные параметры:
    //   A - матрица коэффициентов 4x4
    //   b - вектор правых частей 4x1
    // Возвращает:
    //   x - вектор решения
    //   status - статус решения:
    //            0 - успешно (единственное решение)
    //            1 - система вырождена (бесконечно решений)
    //            2 - система несовместна
    //   residual - вектор невязки (если status=0)
    // ==============================================
    
    if size(A,1) ~= 4 | size(A,2) ~= 4 then
        error("Ошибка: Матрица A должна быть размером 4x4");
    end
    
    if length(b) ~= 4 then
        error("Ошибка: Вектор b должен содержать 4 элемента");
    end
    
    x = [];
    status = -1;
    residual = [];
    
    if det(A) ~= 0 then
        x = A\b;
        status = 0;
        
        // Невязка
        residual = A*x - b;
        
    else
        // Система вырождена
        if rank(A) == rank([A b]) then
            x = linsolve(A, -b);
            status = 1;
        else
            // Система несовместна
            status = 2;
        end
    end
endfunction
